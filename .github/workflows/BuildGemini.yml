name: Kotlin/Gradle CI

on:
  push:
    branches: [ "main", "master" ]
  pull_request:
    branches: [ "main", "master" ]

jobs:
  build:
    # Use the latest stable Ubuntu runner environment
    runs-on: ubuntu-latest
    
    steps:
    - name: â¬‡ï¸ Checkout Repository
      # Checks out your repository under $GITHUB_WORKSPACE, so the workflow can access it.
      uses: actions/checkout@v4

    - name: â˜• Set up JDK 17
      # Sets up the Java Development Kit (JDK) required by Gradle.
      # JDK 17 is the current recommended LTS version for most modern Kotlin/Android projects.
      uses: actions/setup-java@v4
      with:
        java-version: '17'
        distribution: 'temurin'
        # Caches the Gradle dependencies to speed up subsequent builds
        cache: 'gradle'

    - name: âš™ï¸ Grant Execute Permission to gradlew
      # Ensures the Linux runner can execute the Gradle wrapper script.
      run: chmod +x gradlew

    - name: ğŸ—ï¸ Run Build (Check, Assemble, and Tests)
      # Executes the 'build' task which typically includes dependency resolution, 
      # running checks, compiling Kotlin/Java code, running unit tests, and assembling the app.
      run: ./gradlew build

    # --- Optional Steps (Useful for Android Apps) ---
    - name: ğŸ“¦ Upload Artifact (e.g., APK/Bundle)
      uses: actions/upload-artifact@v4
      if: always() # Uploads even if the build failed
      with:
        name: app-release
        path: App/build/outputs/apk/release/app-release-unsigned.apk
        # Adjust path based on your module and output directory
